/* Codestar Framework | A Lightweight and easy-to-use WordPress Options Framework - v1.0.0 - 2015-01-12 */
!function(a,b,c,d){"use strict";a.CSFRAMEWORK=a.CSFRAMEWORK||{},a.fn.CSFRAMEWORK_TAB_NAVIGATION=function(){return this.each(function(){var b=a(this),c=b.find(".cs-nav"),d=b.find(".cs-reset"),e=b.find(".cs-expand-all");c.find("ul:first a").on("click",function(b){b.preventDefault();var e=a(this),f=e.next(),g=e.data("section");f.is("ul")?(f.slideToggle("fast"),e.closest("li").toggleClass("cs-tab-active")):(a("#cs-tab-"+g).fadeIn("fast").siblings().hide(),c.find("a").removeClass("cs-section-active"),e.addClass("cs-section-active"),d.val(g))}),e.on("click",function(c){c.preventDefault(),b.find(".cs-body").toggleClass("cs-show-all"),a(this).find(".fa").toggleClass("fa-eye-slash").toggleClass("fa-eye")})})},a.CSFRAMEWORK.DEPENDENCY=function(b,c){var e=this;e.$el=a(b),e.el=b,e.init=function(){e.ruleset=a.deps.createRuleset();var b={show:function(a){a.removeClass("hidden")},hide:function(a){a.addClass("hidden")},log:!1,checkTargets:!1};c!==d?e.depSub():e.depRoot(),a.deps.enable(e.$el,e.ruleset,b)},e.depRoot=function(){e.$el.each(function(){var b=a(this);b.find("[data-controller]").each(function(){var c=a(this),d=c.data("controller"),f=c.data("condition"),g=c.data("value"),h=b.find('[data-depend-id="'+d+'"]');e.ruleset.createRule(h,f,g).include(c)})})},e.depSub=function(){e.$el.each(function(){var b=a(this);b.find("[data-sub-controller]").each(function(){var c=a(this),d=c.data("sub-controller"),f=c.data("sub-condition"),g=c.data("sub-value"),h=b.find('[data-depend-id="'+d+'"]');e.ruleset.createRule(h,f,g).include(c)})})},e.init()},a.fn.CSFRAMEWORK_DEPENDENCY=function(b){return this.each(function(){new a.CSFRAMEWORK.DEPENDENCY(this,b)})},a.fn.CSFRAMEWORK_CHOSEN=function(){return this.each(function(){a(this).chosen({allow_single_deselect:!0,disable_search_threshold:15,width:parseFloat(a(this).actual("width")+25)+"px"})})},a.fn.CSFRAMEWORK_IMAGE_SELECTOR=function(){return this.each(function(){a("label",this).each(function(){var b=a(this);b.find("input").is(":checked")&&b.addClass("selected"),b.bind("click",function(){var b=a(this);b.find("input").is(":checked")?b.addClass("selected").siblings().removeClass("selected"):(b.removeClass("selected"),b.parent().find("input").each(function(){a(this).attr("checked",!1)}))})})})},a.fn.CSFRAMEWORK_UPLOADER=function(){return this.each(function(){var b,c=a(this),d=c.find(".cs-add-media"),e=c.find(".cs-attachment");d.click(function(a){if(a.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(b)return void b.open();b=wp.media.frames.customUpload=wp.media({title:d.data("frame-title"),library:{type:d.data("upload-type")},button:{text:d.data("insert-title")}}),b.on("select",function(){var a=b.state().get("selection").first();e.val(a.attributes.url).trigger("keyup")}),b.open()}})})},a.fn.CSFRAMEWORK_TYPOGRAPHY=function(){return this.each(function(){var b,c=a(this),d=c.find(".cs-typo-family"),e=c.find(".cs-typo-variant");d.on("change",function(){var c=a(this),d=(c.find(":selected").data("type"),c.find(":selected").data("variants")),f=(c.find(":selected").val(),e.find("option"));b=d.split("|"),f.remove(),a.each(b,function(a,b){e.append('<option value="'+b+'">'+b+"</option>")}),e.find('option[value="regular"]').attr("selected","selected"),e.trigger("chosen:updated")})})},a.fn.CSFRAMEWORK_GROUP=function(){return this.each(function(){var b=a(this),c=b.find(".cs-groups"),d=b.find(".cs-accordion"),e=b.find(".cs-group:first").clone();d.length&&d.accordion({header:"> div > h4",collapsible:!0,active:!1,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(b,c){a(c.newPanel).CSFRAMEWORK_DEPENDENCY("sub")}}),c.sortable({axis:"y",handle:"h4",helper:"clone",cursor:"move",placeholder:"widget-placeholder",start:function(a,b){var d=b.item.children(".ui-accordion-content");"block"===d.css("display")&&(d.hide(),c.sortable("refreshPositions"))},stop:function(a,b){b.item.children("h4").triggerHandler("focusout"),d.accordion({active:!1})}});var f=0;a(".cs-add-group",b).click(function(b){b.preventDefault(),e.find("input, select, textarea").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(a,b){return"["+(parseInt(b,10)+1)+"]"})});var g=e.clone().removeClass("hidden");c.append(g),d.length&&(c.accordion("refresh"),c.accordion({active:g.index()})),c.find("input, select, textarea").each(function(){this.name=this.name.replace("[_nonce]","")}),g.CSFRAMEWORK_DEPENDENCY("sub"),a.CSFRAMEWORK.RELOAD_PLUGINS(),f++}),c.on("click",".cs-remove-group",function(b){b.preventDefault(),a(this).closest(".cs-group").remove()})})},a.fn.CSFRAMEWORK_CONFIRM=function(){return this.each(function(){a(this).click(function(a){confirm("Are you sure?")||a.preventDefault()})})},a.fn.CSFRAMEWORK_SAVE_AJAX=function(){return this.each(function(){var b=a(this),c=b.next(),d=parseInt(c.data("ajax")),e=c.data("save"),f=c.val();c.click(function(g){if(d){c.prop("disabled",!0).attr("value",e);var h=a("#csframework_form").serialize();a.post("options.php",h).error(function(){alert("Error, Please try again.")}).success(function(){c.prop("disabled",!1).attr("value",f),b.hide().fadeIn().delay(250).fadeOut()}),g.preventDefault()}else c.addClass("disabled").attr("value",e)})})},a.widget("ui.dialog",a.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:"close"})}}),a.CSFRAMEWORK.ICONS_MANAGER=function(){var d,e=this,f=!0;e.init=function(){a(c.body).on("click",".cs-icon-add",function(c){c.preventDefault();var e=a(this),g=a("#cs-icon-dialog"),h=g.find(".cs-dialog-load"),i=(g.find(".cs-dialog-select"),g.find(".cs-dialog-insert"),g.find(".cs-icon-search"));d=e.closest(".cs-icon-select"),g.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:b},open:function(){a(".ui-dialog-titlebar-close").addClass("ui-button"),a(b).on("resize",function(){var c=a(b).height(),d=Math.floor(c-237),e=Math.floor(c-125);g.dialog("option","height",e).parent().css("max-height",e),g.css("overflow","auto"),h.css("height",d)}).resize()}}),f&&a.ajax({type:"POST",url:ajaxurl,data:{action:"cs-get-icons"},success:function(b){h.html(b),f=!1,h.on("click","a",function(b){b.preventDefault();var c=a(this).data("icon");d.find("i").removeAttr("class").addClass(c),d.find("input").val(c),d.find(".cs-icon-preview").removeClass("hidden"),d.find(".cs-icon-remove").removeClass("hidden"),g.dialog("close")}),i.keyup(function(){var b=a(this).val(),c=h.find("a");c.each(function(){var c=a(this);c.data("icon").search(new RegExp(b,"i"))<0?c.hide():c.show()})}),h.find(".cs-icon-tooltip").tooltip({html:!0,placement:"top",container:"body"})}})}),a(c.body).on("click",".cs-icon-remove",function(b){b.preventDefault();var c=a(this),d=c.closest(".cs-icon-select");d.find(".cs-icon-preview").addClass("hidden"),d.find("input").val(""),c.addClass("hidden")})},e.init()},a.CSFRAMEWORK.SHORTCODE_MANAGER=function(){var e,f=this;f.init=function(){var d,e,g,h,i=a("#cs-shortcode-dialog"),j=i.find(".cs-dialog-insert"),k=i.find(".cs-dialog-load"),l=i.find(".cs-dialog-select"),m=!1;a(c.body).on("click",".cs-shortcode",function(c){c.preventDefault(),d=a(this),m=d.hasClass("cs-shortcode-textarea"),i.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:b},open:function(){a(".ui-dialog-titlebar-close").addClass("ui-button"),a(b).on("resize",function(){var c=a(b).height(),d=Math.floor(c-281),e=Math.floor(c-125);i.dialog("option","height",e).parent().css("max-height",e),i.css("overflow","auto"),k.css("height",d)}).resize()},close:function(){m=!1}})}),l.on("change",function(){var b=a(this);e=b.val(),g=b.find(":selected").data("view"),e.length?a.ajax({type:"POST",url:ajaxurl,data:{action:"cs-get-shortcode",shortcode:e},success:function(b){k.html(b),j.parent().removeClass("hidden"),h=a(".cs-shortcode-clone",i).clone(),k.CSFRAMEWORK_DEPENDENCY(),k.CSFRAMEWORK_DEPENDENCY("sub"),a.CSFRAMEWORK.RELOAD_PLUGINS()}}):(j.parent().addClass("hidden"),k.html(""))}),j.click(function(c){c.preventDefault();var h="",j="data-atts",k="data-clone-atts",l="data-clone-id";switch(g){case"contents":a("["+j+"]",".cs-dialog-load").each(function(){var b=a(this),c=b.data("atts");h+="["+c+"]",h+=b.val(),h+="[/"+c+"]"});break;case"clone":h+="["+e,a("["+j+"]",".cs-dialog-load .cs-element:not(.hidden)").each(function(){var b=a(this),c=b.data("atts");h+=f.validate_atts(c,b)}),h+="]",a("["+l+"]",".cs-dialog-load").each(function(){var b=a(this),c=b.data("clone-id");h+="["+c,a("["+k+"]",b.find(".cs-element").not(".hidden")).each(function(){var b=a(this),d=b.data("clone-atts");"content"!==d?h+=f.validate_atts(d,b):"content"===d&&(h+="]",h+=b.val(),h+="[/"+c)}),h+="]"}),h+="[/"+e+"]";break;case"clone_duplicate":a("["+l+"]",".cs-dialog-load").each(function(){var b=a(this),c=b.data("clone-id");h+="["+c,a("["+k+"]",b.find(".cs-element").not(".hidden")).each(function(){var b=a(this),d=b.data("clone-atts");"content"!==d?h+=f.validate_atts(d,b):"content"===d&&(h+="]",h+=b.val(),h+="[/"+c)}),h+="]"});break;default:h+="["+e,a("["+j+"]",".cs-dialog-load .cs-element:not(.hidden)").each(function(){var b=a(this),c=b.data("atts");"content"!==c?h+=f.validate_atts(c,b):"content"===c&&(h+="]",h+=b.val(),h+="[/"+e)}),h+="]"}if(m){var n=d.next();n.val(f.insertAtChars(n,h))}else b.send_to_editor(h);i.dialog("close")});var n=0;i.on("click","#shortcode-clone-button",function(b){b.preventDefault();var c=h.clone().hide();c.find("input:radio").attr("name","_nonce_"+n),a(".cs-shortcode-clone:last").after(c),c.slideDown(100),c.find(".cs-remove-clone").show().click(function(a){c.slideUp(100,function(){c.remove()}),a.preventDefault()}),c.CSFRAMEWORK_DEPENDENCY("sub"),a.CSFRAMEWORK.RELOAD_PLUGINS(),n++})},f.validate_atts=function(b,c){var f;return c.data("check")!==d&&e===b?"":(e=b,c.closest(".pseudo-field").hasClass("hidden")===!0?"":c.hasClass("pseudo")===!0?"":(f=c.is(":checkbox")||c.is(":radio")?c.is(":checked")?c.val():"":c.val(),c.data("check")!==d&&(f=c.closest(".cs-element").find("input:checkbox:checked").map(function(){return a(this).val()}).get()),null!==f&&f!==d&&""!==f&&0!==f.length?" "+b+'="'+f+'"':""))},f.insertAtChars=function(b,c){var e=typeof b[0].name!==d?b[0]:b;return a.browser.mozilla||a.browser.webkit?(e.focus(),e.value.substring(0,e.selectionStart)+c+e.value.substring(e.selectionEnd,e.value.length)):(e.focus(),c)},f.init()},typeof Color.fn.toString!==d&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(a.length<6)for(var b=6-a.length-1;b>=0;b--)a="0"+a;return"#"+a}),a.CSFRAMEWORK.PARSE_COLOR_VALUE=function(a){var b=a.replace(/\s+/g,""),c=-1!==b.indexOf("rgba")?parseFloat(100*b.replace(/^.*,(.+)\)/,"$1")):100,d=100>c?!0:!1;return{value:b,alpha:c,rgba:d}},a.fn.CSFRAMEWORK_COLORPICKER=function(){return this.each(function(){var b=a(this);if(b.data("rgba")!==!1){var c=a.CSFRAMEWORK.PARSE_COLOR_VALUE(b.val());b.wpColorPicker({change:function(a,c){b.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",c.color.toString()),b.trigger("keyup")},create:function(){var d=b.data("a8cIris"),e=b.closest(".wp-picker-container"),f=a('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(e.find(".wp-picker-holder")),g=f.find(".cs-alpha-slider"),h=f.find(".cs-alpha-text"),i=f.find(".cs-alpha-slider-offset");g.slider({slide:function(a,c){var e=parseFloat(c.value/100);d._color._alpha=e,b.wpColorPicker("color",d._color.toString()),h.text(1>e?e:"")},create:function(){var j=parseFloat(c.alpha/100),k=1>j?j:"";h.text(k),i.css("background-color",c.value),e.on("click",".wp-picker-clear",function(){d._color._alpha=1,h.text(""),g.slider("option","value",100).trigger("slide")}),e.on("click",".wp-picker-default",function(){var c=a.CSFRAMEWORK.PARSE_COLOR_VALUE(b.data("default-color")),e=parseFloat(c.alpha/100),f=1>e?e:"";d._color._alpha=e,h.text(f),g.slider("option","value",c.alpha).trigger("slide")}),e.on("click",".wp-color-result",function(){f.toggle()}),a("body").on("click.wpcolorpicker",function(){f.hide()})},value:c.alpha,step:1,min:1,max:100})}})}else b.wpColorPicker({change:function(){b.trigger("keyup")}})})},a.CSFRAMEWORK.RELOAD_PLUGINS=function(){a(".chosen").CSFRAMEWORK_CHOSEN(),a(".cs-image-select").CSFRAMEWORK_IMAGE_SELECTOR(),a(".cs-uploader").CSFRAMEWORK_UPLOADER(),a(".cs-typography").CSFRAMEWORK_TYPOGRAPHY(),a(".cs-color-picker").CSFRAMEWORK_COLORPICKER(),a(".cs-help").tooltip({html:!0,placement:"left",container:"body"})},a(c).ready(function(){a(".cs-framework").CSFRAMEWORK_TAB_NAVIGATION(),a(".cs-reset-confirm, .cs-import-backup").CSFRAMEWORK_CONFIRM(),a(".cs-content").CSFRAMEWORK_DEPENDENCY(),a(".cs-field-group").CSFRAMEWORK_GROUP(),a("#cs-save-ajax").CSFRAMEWORK_SAVE_AJAX(),a.CSFRAMEWORK.ICONS_MANAGER(),a.CSFRAMEWORK.SHORTCODE_MANAGER(),a.CSFRAMEWORK.RELOAD_PLUGINS()})}(jQuery,window,document);